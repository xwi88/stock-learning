# 最强指标

> 均線密集區間以及最強指標(4/3新增分時圖VWAP，5/9修正已知錯誤)

## ref

- https://q.futunn.com/hk/feed/105933811351956?lang_code=1

## codes

```txt
BBI:(MA(CLOSE,3)+MA(CLOSE,6)+MA(CLOSE,12)+MA(CLOSE,24))/4,COLORFF8D1E;
AVGPRICE:=TOTALAMOUNT/TOTALVOL;
PE:=IF(PERIOD<=7,PERIOD+1,IF(PERIOD=12,2,IF(PERIOD>12,5,9)))
DD:=IF(CAPITAL>VOL*574,TOTALBARSCOUNT,SUMBARS(VOL,CAPITAL))
HSXVAL:=IF(PE<=4,0,EMA(C,DD))
HSX:IF(PE>5, EMA(C,DD), AVGPRICE),COLORGRAY,LINETHICK2
IF(BETWEEN(PE,4,9) AND DD>=200 AND EMA(C,DD)<C*0.618,EMA(C,DD),DRAWNULL),COLORRED,LINETHICK2
HS: IF(PE<=5 OR DD>=200 AND MA(C,DD)<C*0.618,DRAWNULL,MA(C,DD)),COLORGRAY
HSL:=VOL/CAPITAL*100
PE2:=IF(PE>=5,IF(PE>=7,IF(PE>=8,PE*PE,PE*3),PE),PE/2)
PE3:=PE2*IF(PE<=5,1+SQRT(PE+C/500)/5,(IF(C<500,25+C*0.04,50)+SQRT(SQRT(C/100)))/10)
MAC:=VALUEWHEN((MA(C,5)>MA(C,10) AND MA(C,10)<MA(C,20) AND C>MA(C,20)) AND PE<=8,C)
MACX:VALUEWHEN(C<MAC*IF(PE<=4,(1000+PE*5)/1000,1.05) AND C>MAC*IF(PE<=4,(1000-PE*5)/1000,0.95),C),POINTDOT
MAUP:=PE<=8 AND (PE<=4 OR (C>MACX AND (C<HSXVAL*(1000-PE*10)/1000 OR C> HSXVAL*(1000+PE*10)/1000) ));
_MAOKUP:= MAUP OR (MAOK>0)
MADOWN:=PE<=8 AND (PE<=4 OR (C<MACX AND (C<HSXVAL*(1000-PE*10)/1000 OR C> HSXVAL*(1000+PE*10)/1000) ));
_MAOKDOWN:= MADOWN  OR (MAOK>0)
FILLRGN(C*(10000-PE3)/10000,C*(10000+PE3)/10000,MAC=C,COLORLICYAN)
P:=ROUND((NINE-1)/2)
NUM:=NINE-P+1
COUNTUP:=BARSLASTCOUNT(C>REF(C,P));
COUNTUPMACX:=BARSLASTCOUNT(C>REF(C,P) AND C>MACX);
COUNTUPDIFF:=COUNTUP-COUNTUPMACX;
DRAWUP:=((COUNTUPDIFF = 0) OR _MAOKUP);
OTHERUP:=ISLASTBAR AND BETWEEN(COUNTUP, NUM, NINE-1)
NUMBERUP:=COUNTUP*(BACKSET((COUNTUP=NINE AND DRAWUP) OR ISLASTBAR, P) OR BACKSET(OTHERUP>0, P));
DRAWNUMBER((NUMBERUP > NUM AND (NUMBERUP < NINE) AND DRAWUP), H*(10000-PE)/10000, NUMBERUP), COLORGREEN, LINETHICK2;
DRAWICON((COUNTUP = NINE AND DRAWUP), H*(10000+3*PE)/10000,8);
COUNTDOWN:=BARSLASTCOUNT(C<REF(C,P));
COUNTDOWNMACX:=BARSLASTCOUNT(C<REF(C,P) AND C<MACX);
COUNTDOWNDIFF:=COUNTDOWN-COUNTDOWNMACX;
DRAWDOWN:=((COUNTDOWNDIFF = 0) OR _MAOKDOWN);
OTHERDOWN:=ISLASTBAR AND BETWEEN(COUNTDOWN, NUM, NINE-1);
NUMBERDOWN:= COUNTDOWN*(BACKSET(COUNTDOWN =NINE AND DRAWDOWN, P) OR BACKSET(OTHERDOWN>0, P))
DRAWNUMBER((NUMBERDOWN > NUM AND (NUMBERDOWN < NINE) AND DRAWDOWN), L*(10000+PE)/10000, NUMBERDOWN), COLORRED, LINETHICK2;
DRAWICON((COUNTDOWN = NINE AND DRAWDOWN), L*(10000-3*PE)/10000,7);
```

### params

- 编码: HSX9
- 全名: 9转序列/换手均价
- 主图

|参数名|参数值|最大值|最小值|
|--|--|--|--|
|NINE|13|13|8|
|MAOK|1|1|0|
